---

- name: Ensure Jenkins Docker Volumes
  community.docker.docker_volume:
    name: jenkins-data

- name: Ensure Jenkins Container
  community.docker.docker_container:
    name: jenkins-master
    hostname: jenkins-master.local
    image: jenkins/jenkins:lts
    networks_cli_compatible: false
    container_default_behavior: no_defaults
    auto_remove: yes
    networks:
      - name: ops_tools_net
    ports:
      - '8080:8080' # Web UI
      - '50000:50000' # Remote API
      - '53801:53801' # Random SSH Port
    volumes:
      #- jenkins-docker-certs:/certs/client
      - jenkins-data:/var/jenkins_home